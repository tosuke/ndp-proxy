nodes:
- name: R0
  type: netns
  interfaces:
  - name: net0
    type: bridge
    args: B0
- name: R1
  type: netns
  interfaces:
  - name: net0
    type: bridge
    args: B0
  - name: net1
    type: direct
    args: N0#net0
- name: R2
  type: netns
  interfaces:
  - name: net0
    type: bridge
    args: B0
- name: N0
  type: netns
  interfaces:
  - name: net0
    type: direct
    args: R1#net1

switches:
- name: B0
  interfaces:
  - name: net0
    type: netns
    args: R0
  - name: net0
    type: netns
    args: R1
  - name: net0
    type: netns
    args: R2

node_configs:
- name: R0
  cmds:
  - cmd: sysctl -w net.ipv4.ip_forward=1
  - cmd: sysctl -w net.ipv6.conf.all.forwarding=1
  - cmd: ip addr add 2001:db8:0::1/32 dev net0
- name : R1
  cmds:
  - cmd: sysctl -w net.ipv4.ip_forward=1
  - cmd: sysctl -w net.ipv6.conf.all.forwarding=1
  - cmd: ip addr add 2001:db8:0::2/64 dev net0
  - cmd: ip addr add 2001:db8:1::1/64 dev net1
- name: R2
  cmds:
  - cmd: sysctl -w net.ipv4.ip_forward=1
  - cmd: sysctl -w net.ipv6.conf.all.forwarding=1
  - cmd: ip addr add 2001:db8:0::3/64 dev net0
- name: N0
  cmds:
  - cmd: ip addr add 2001:db8:1::3/64 dev net0
  - cmd: ip route add default via 2001:db8:1::1
